# PID 제어 및 튜닝 (Proportional-Integral-Derivative Control)

**PID 제어**는 산업계와 로봇 공학에서 가장 널리 사용되는 피드백 제어 알고리즘 중 하나입니다. 제어하려는 대상의 현재 상태(Process Variable, PV)를 측정하여 목표 값(Setpoint, SP)과의 차이, 즉 **오차(Error)**를 계산하고, 이 오차를 줄이기 위해 제어 입력을 조절합니다.

PID 제어는 세 가지 기본 제어 동작의 조합으로 이루어집니다.

- **비례 (Proportional, P) 제어**
- **적분 (Integral, I) 제어**
- **미분 (Derivative, D) 제어**

`제어 입력(u(t)) = Kp * e(t) + Ki * ∫e(τ)dτ + Kd * de(t)/dt`

- `e(t)`: 오차 (Error = SP - PV)
- `Kp`: 비례 이득 (Proportional Gain)
- `Ki`: 적분 이득 (Integral Gain)
- `Kd`: 미분 이득 (Derivative Gain)

## 1. 비례 제어 (Proportional Control)

**"현재 오차의 크기에 비례하여 제어한다."**

비례 제어는 현재 오차 `e(t)`에 비례 이득 `Kp`를 곱하여 제어 입력을 결정합니다.
- `P_out = Kp * e(t)`

- **역할:**
  - 오차에 비례하여 제어 입력을 생성하므로, 오차를 줄이는 가장 기본적인 역할을 합니다.
  - `Kp`가 클수록 시스템의 응답이 빨라지지만, 너무 크면 시스템이 불안정해지고 오버슈트(Overshoot)가 발생할 수 있습니다.
- **한계:**
  - 시스템에 중력이나 마찰과 같은 지속적인 외란이 있는 경우, **정상상태 오차(Steady-state Error)**가 발생할 수 있습니다. 즉, 목표 값에 완전히 도달하지 못하고 일정한 오차를 남깁니다.

## 2. 적분 제어 (Integral Control)

**"과거의 오차를 누적하여 제어한다."**

적분 제어는 과거부터 현재까지의 오차를 시간에 대해 누적(적분)하고, 여기에 적분 이득 `Ki`를 곱하여 제어 입력을 결정합니다.
- `I_out = Ki * ∫e(τ)dτ`

- **역할:**
  - 작은 오차라도 시간이 지남에 따라 누적되어 제어 입력에 큰 영향을 미칩니다. 이를 통해 비례 제어만으로는 제거할 수 없었던 **정상상태 오차를 제거**하는 핵심적인 역할을 합니다.
- **한계:**
  - 누적된 오차에 반응하므로 시스템의 응답을 느리게 만들 수 있습니다.
  - `Ki`가 너무 크면 오버슈트가 커지고 시스템이 불안정해지는 '인테그랄 와인드업(Integral Windup)' 현상이 발생할 수 있습니다.

## 3. 미분 제어 (Derivative Control)

**"미래의 오차를 예측하여 제어한다."**

미분 제어는 현재 오차의 변화율(기울기)에 미분 이득 `Kd`를 곱하여 제어 입력을 결정합니다.
- `D_out = Kd * de(t)/dt`

- **역할:**
  - 오차의 변화율, 즉 오차가 얼마나 빨리 변하는지를 감지합니다.
  - 오차가 목표 값에 빠르게 접근할 때(기울기가 클 때) 제동을 거는 역할을 하여 **오버슈트를 줄이고** 시스템의 안정성(Damping)을 높입니다.
  - 시스템의 급격한 변화에 미리 대응하여 진동을 억제합니다.
- **한계:**
  - 센서 노이즈와 같이 출력이 급격하게 변하는 신호에 매우 민감하게 반응하여 제어 입력을 불안정하게 만들 수 있습니다. (필터링과 함께 사용되기도 함)
  - 단독으로는 사용되지 않고 P 또는 PI 제어기와 함께 사용됩니다.

## PID 튜닝 (PID Tuning)

PID 제어기의 성능은 `Kp`, `Ki`, `Kd` 이득 값에 따라 크게 달라집니다. **PID 튜닝**은 제어 대상 시스템에 가장 적합한 이득 값들을 찾는 과정입니다.

- **목표:** 빠른 응답 속도, 작은 오버슈트, 정상상태 오차 없음, 안정성 확보
- **튜닝 방법:**
  1.  **수동 튜닝 (Manual Tuning):**
      - 가장 일반적인 방법으로, 경험에 기반하여 이득 값을 조절합니다.
      - 보통 `Kp`를 먼저 올리면서 원하는 응답 속도를 찾고, 그 다음 `Kd`를 조절하여 오버슈트를 줄인 뒤, 마지막으로 `Ki`를 추가하여 정상상태 오차를 제거하는 순서로 진행합니다.
  2.  **지글러-니콜스 방법 (Ziegler-Nichols Method):**
      - 시스템의 특성을 파악하여 정해진 규칙에 따라 이득 값을 계산하는 경험적인 방법입니다.
      - 제어기를 P 제어기만 사용하고 `Kp`를 0에서부터 점차 증가시켜 시스템이 지속적으로 진동하는 지점의 `Kp` 값(임계 이득, Ku)과 진동 주기(Pu)를 측정합니다.
      - 측정된 `Ku`와 `Pu`를 아래 표의 공식에 대입하여 PID 이득 값을 결정합니다.
      | 제어기 타입 | Kp | Ki | Kd |
      | :--- | :--- | :--- | :--- |
      | P | 0.5 Ku | - | - |
      | PI | 0.45 Ku | 1.2 Kp / Pu | - |
      | PID | 0.6 Ku | 2 Kp / Pu | Kp * Pu / 8 |
  3.  **자동 튜닝 (Auto-tuning):**
      - 소프트웨어나 알고리즘이 자동으로 시스템에 특정 신호를 가하고 그 응답을 분석하여 최적의 이득 값을 찾아주는 방식입니다.

로봇의 관절 제어, 드론의 자세 제어, 온도를 일정하게 유지하는 시스템 등 우리 주변의 수많은 자동화 시스템이 PID 제어 원리로 동작하고 있습니다.
