# 파트 10: AI 기반 로봇 응용 (AI-Powered Robotic Applications)

## 10.4. 휴머노이드 및 다리 로봇 (Humanoids and Legged Robots)

### 10.4.3. 균형 제어 (Balance Control): Zero Moment Point (ZMP)

**들어가며**

두 발로 걷는 휴머노이드에게 가장 근본적이고 중요한 과제는 '넘어지지 않는 것'입니다. **균형 제어**는 로봇이 걷거나, 외부 힘에 의해 밀리거나, 작업을 수행하는 등 다양한 상황 속에서 안정적인 자세를 유지하는 기술입니다. 인간은 발바닥으로 느끼는 압력과 전정기관의 균형 감각을 통해 무의식적으로 무게 중심을 이동하며 균형을 잡습니다. 로봇은 이를 수학적인 모델과 제어 알고리즘으로 구현해야 합니다. 그 핵심에 바로 **ZMP(Zero Moment Point)**라는 개념이 있습니다.

---

**1. ZMP (Zero Moment Point) 란?**

- **개념 복습 (파트 10.4.1 연계):** ZMP는 로봇의 발바닥과 지면이 접촉하는 지점에서, 로봇의 움직임으로 인해 발생하는 모든 관성력과 중력이 합쳐져 만들어내는 **전도 모멘트(overturning moment)가 0이 되는 지점**을 의미합니다. (단, ZMP 개념은 평평한 수평 지면에서만 유효하다는 한계가 있습니다.)
- **물리적 의미:** ZMP는 발바닥에 작용하는 모든 압력의 **분포 중심점**이라고 직관적으로 이해할 수 있습니다.
- **안정성의 척도:** 로봇이 넘어지지 않고 동적으로 안정된 상태를 유지하기 위한 필요충분조건은 **"ZMP가 항상 지지 다각형(Support Polygon, 현재 땅에 닿은 발바닥 영역) 내부에 존재하는 것"** 입니다. 만약 ZMP가 발바닥 경계를 벗어나는 순간, 로봇은 그 방향으로 넘어지는 회전력(모멘트)을 받게 됩니다.

---

**2. ZMP 기반 균형 제어**

ZMP를 안정적으로 제어하는 것이 곧 균형 제어의 핵심입니다. 제어의 목표는 로봇의 움직임(주로 상체와 무게 중심의 움직임)을 조절하여, 결과적으로 계산되는 ZMP가 원하는 위치(보통 발바닥 중앙)에 오도록 만드는 것입니다.

- **선형 역진자 모델 (Linear Inverted Pendulum Model, LIPM):**
  - **개념:** 복잡한 휴머노이드 전체의 동역학을 '질량이 한 점(CoM)에 모여 있는 막대기가 평면(ZMP) 위에서 움직이는' 매우 단순한 모델로 근사한 것입니다.
    ```
      (CoM) ●
            |
            | (질량 없는 다리)
            |
      (ZMP) o --- (평면)
    ```
  - **가정:** 로봇의 질량이 모두 무게 중심(Center of Mass, CoM)에 모여 있고, 다리의 질량은 무시하며, CoM의 높이는 일정하게 유지된다고 가정합니다.
  - **중요한 관계식:** 이 모델 하에서, **CoM의 가속도는 ZMP와 CoM의 위치 차이에 비례**한다는 매우 간단한 선형 관계식이 유도됩니다.
    $`\ddot{x}_{c} = \frac{g}{z_c} (x_c - x_{zmp})`$
  - **활용:** 이 간단한 식 덕분에, 우리는 원하는 ZMP 궤적($`ZMP_{ref}`$)을 만들기 위해 CoM을 어떻게 움직여야 하는지($`CoM_{ref}`$)를 쉽게 계산할 수 있습니다. 이것이 ZMP 기반 보행 패턴 생성의 기본 원리입니다.

- **ZMP 피드백 제어:**
  - **문제점:** 이상적인 모델과 달리, 실제 로봇은 모델 오차나 예상치 못한 외력으로 인해 계획대로 움직이지 않습니다. 이로 인해 실제 ZMP($`ZMP_{real}`$)는 목표 ZMP($`ZMP_{ref}`$)를 벗어나게 됩니다.
  - **해결책:** 이는 일종의 **모델 예측 제어(Model Predictive Control, MPC)** 관점으로 해결할 수 있습니다. 즉, LIPM을 이용해 미래의 ZMP를 예측하고, 실제 측정값과의 오차를 보상하도록 실시간으로 제어 입력을 수정합니다.
    1.  **실제 ZMP 측정:** 발바닥에 부착된 **힘/토크 센서(F/T Sensor)**를 통해 실제 ZMP 위치를 계산합니다.
    2.  **오차 보상:** 목표 ZMP와 실제 ZMP의 오차($`e_{zmp}`)를 0으로 만들기 위해, CoM의 목표 궤적을 수정하거나 상체의 자세를 조절하는 추가적인 제어 입력을 생성합니다.

---

**3. ZMP를 넘어서: 발 위치 조절 (Footstep Adjustment)**

ZMP 제어는 주로 상체 움직임을 통해 균형을 잡는 방식입니다. 하지만 외부의 힘이 너무 커서 상체 제어만으로는 ZMP를 지지 다각형 내에 유지할 수 없는 상황이 발생할 수 있습니다.

- **캡처 포인트 (Capture Point) 기반 제어:**
  - **개념 복습 (파트 10.4.1 연계):** 캡처 포인트는 '현재 상태에서 로봇이 넘어진다고 가정할 때, 한 걸음을 내딛어 안정적으로 정지할 수 있는 발의 위치'입니다.
  - **동작:** 로봇의 현재 상태(CoM 위치, 속도)를 바탕으로 캡처 포인트를 실시간으로 계산합니다. 만약 이 캡처 포인트가 현재의 지지 다각형을 벗어난다면, 이는 '상체 제어만으로는 더 이상 균형을 잡을 수 없으니, 발을 옮겨야 한다'는 신호입니다.
  - **활용:** 이와 같은 **반응적인(reactive)** 발 위치 조절 전략은 Boston Dynamics 사의 로봇들처럼 매우 동적이고 강건한 보행을 구현하는 핵심 요소입니다. 로봇은 계산된 캡처 포인트 위치로 다음 발을 빠르게 내딛어 새로운 지지 다각형을 형성하고 균형을 회복합니다.

**결론**

ZMP는 휴머노이드의 동적 균형을 이해하고 제어하는 데 있어 가장 핵심적인 개념입니다. LIPM과 같은 단순화된 모델을 통해 CoM과 ZMP의 관계를 파악하고, 이를 기반으로 보행 패턴을 생성하며, ZMP 피드백 제어를 통해 외부 외란에 대응합니다. 더 나아가, ZMP만으로 감당할 수 없는 큰 충격에 대해서는 캡처 포인트 개념을 활용한 발 위치 조절 전략으로 대응함으로써, 휴머노이드는 비로소 복잡하고 예측 불가능한 현실 세계에서 두 발로 서서 안정적으로 임무를 수행할 수 있는 강건함을 갖추게 됩니다.
