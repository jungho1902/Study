# 파일 입출력 (File I/O)

파일 입출력(File Input/Output)은 프로그램이 컴퓨터의 파일 시스템에 있는 파일을 읽거나 쓰는 기능을 말합니다. 데이터 분석에서는 CSV, TXT, JSON 등 다양한 형식의 파일을 읽어서 데이터를 로드하거나, 분석 결과를 파일로 저장하는 작업이 매우 흔합니다.

---

### 1. 파일 열기 (`open`)

파이썬에서 파일을 다루려면 내장 함수인 `open()`을 사용하여 파일 객체(file object)를 얻어야 합니다.

`file_object = open(file_name, mode)`

- **`file_name`:** 열고자 하는 파일의 경로와 이름 (문자열).
- **`mode`:** 파일을 여는 목적을 지정합니다.
  - `'r'`: 읽기 모드 (기본값). 파일이 없으면 에러 발생.
  - `'w'`: 쓰기 모드. 파일이 있으면 내용을 모두 덮어쓰고, 없으면 새로 생성.
  - `'a'`: 추가 모드 (Append). 파일이 있으면 파일의 맨 끝에 내용을 추가하고, 없으면 새로 생성.
  - `'b'`: 바이너리 모드 (예: 이미지, 영상 파일). `rb`, `wb`처럼 다른 모드와 함께 사용.
  - `'+'`: 읽기와 쓰기를 모두 할 수 있게 함. `r+`, `w+`처럼 사용.

---

### 2. 파일 닫기 (`close`) 와 `with` 문

파일 작업을 마친 후에는 반드시 `close()` 메서드를 호출하여 파일 객체를 닫아주어야 합니다. 이는 시스템 리소스를 해제하고 데이터가 완전히 쓰이는 것을 보장합니다.

하지만 `close()`를 잊어버리거나 예외(error) 발생 시 닫히지 않는 문제가 생길 수 있습니다. 이를 방지하기 위해 **`with` 문**을 사용하는 것이 표준적인 방법입니다. `with` 블록이 끝나면 파이썬이 자동으로 파일을 닫아줍니다.

```python
# with 문을 사용한 파일 열기 (권장)
with open('my_file.txt', 'w') as f:
    # 이 블록 안에서 파일 작업 수행
    f.write("Hello, world!")
# with 블록이 끝나면 f는 자동으로 닫힙니다.
```

---

### 3. 파일 읽기 (Reading from a File)

```python
# 예시 텍스트 파일 (hello.txt) 생성
with open('hello.txt', 'w') as f:
    f.write("Hello, Python!\n")
    f.write("Welcome to Data Science.\n")

# 파일 읽기
with open('hello.txt', 'r') as f:
    # 방법 1: 파일 전체를 하나의 문자열로 읽기
    content = f.read()
    print("--- read() 결과 ---")
    print(content)

with open('hello.txt', 'r') as f:
    # 방법 2: 파일의 모든 라인을 리스트로 읽기
    lines = f.readlines()
    print("--- readlines() 결과 ---")
    print(lines) # ['Hello, Python!\n', 'Welcome to Data Science.\n']
    for line in lines:
        print(line.strip()) # .strip()으로 양 끝의 공백 및 개행문자 제거

with open('hello.txt', 'r') as f:
    # 방법 3: 파일을 한 줄씩 순회하며 읽기 (메모리 효율적)
    print("--- for loop 결과 ---")
    for line in f:
        print(line.strip())
```

---

### 4. 파일 쓰기 (Writing to a File)

`'w'` 모드나 `'a'` 모드로 파일을 열고 `write()` 메서드를 사용합니다.

- **`write(string)`:** 주어진 문자열을 파일에 씁니다. 줄바꿈을 하려면 개행 문자 `\n`를 직접 추가해야 합니다.

```python
lines_to_write = ["First line.\n", "Second line.\n", "Third line.\n"]

# 'w' 모드: 파일을 새로 쓰고 기존 내용은 덮어씀
with open('output.txt', 'w') as f:
    f.write("This is a new file.\n")
    f.writelines(lines_to_write) # 리스트의 문자열들을 한 번에 쓸 수 있음

# 'a' 모드: 파일의 끝에 내용을 추가
with open('output.txt', 'a') as f:
    f.write("This line is appended.\n")

# 결과 확인
with open('output.txt', 'r') as f:
    print(f.read())
```
