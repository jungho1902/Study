# 힘 제어 및 임피던스 제어 (Force Control and Impedance Control)

전통적인 로봇 제어(위치/궤적 제어)는 로봇이 정해진 위치와 경로를 최대한 정확하게 따르도록 하는 것을 목표로 합니다. 이는 로봇이 허공에서 움직이거나, 단단한 물체를 조작하는 작업에는 효과적입니다.

하지만 로봇이 외부 환경과 **물리적인 접촉**을 하며 상호작용해야 하는 작업(예: 문 열기, 부품 연마, 조립, 인간과의 협업)에서는 위치만 제어하는 것이 오히려 위험할 수 있습니다. 로봇이 정해진 위치를 고수하려다 예기치 못한 힘이 발생하여 로봇이나 작업 대상물, 심지어 사람이 손상될 수 있기 때문입니다.

이러한 문제를 해결하기 위해 **힘 제어(Force Control)**와 **임피던스 제어(Impedance Control)**가 사용됩니다. 이 제어 방식들은 로봇의 위치뿐만 아니라 환경과 상호작용하는 **힘**을 제어의 목표로 삼습니다.

## 1. 힘 제어 (Force Control)

**힘 제어**는 로봇의 엔드 이펙터가 환경에 가하는 힘(또는 접촉력)을 원하는 목표 힘 값으로 유지하도록 직접적으로 제어하는 방식입니다.

- **핵심 요소:** 손목 등에 부착된 **힘/토크 센서(Force/Torque Sensor)**를 통해 로봇과 환경 사이에 작용하는 힘을 실시간으로 측정합니다.
- **제어 구조:** 측정된 힘과 목표 힘 사이의 오차(`F_error = F_desired - F_measured`)를 계산하고, 이 오차를 줄이는 방향으로 로봇의 위치나 속도를 수정합니다.
- **예시:**
  - **연마/디버링 작업:** 일정한 힘으로 부품 표면을 누르면서 연마 작업을 수행합니다.
  - **부품 삽입:** 부품이 끼워질 때 과도한 힘이 감지되면 삽입 동작을 멈추거나 조정합니다.

### 하이브리드 위치/힘 제어 (Hybrid Position/Force Control)

많은 작업에서는 특정 방향으로는 위치를 제어하고, 다른 방향으로는 힘을 제어해야 합니다. 예를 들어, 칠판에 글씨를 쓰는 작업을 생각해보면:
- 칠판에 수직인 방향(누르는 방향)으로는 **힘 제어**가 필요합니다 (일정한 필압 유지).
- 칠판 표면 방향(글씨를 쓰는 방향)으로는 **위치 제어**가 필요합니다 (원하는 글자 모양).

**하이브리드 위치/힘 제어**는 이처럼 작업 공간을 위치 제어가 필요한 부분공간과 힘 제어가 필요한 부분공간으로 나누어, 각 방향에 맞는 제어기를 동시에 적용하는 방식입니다.

## 2. 임피던스 제어 (Impedance Control)

**임피던스 제어**는 힘을 직접 제어하기보다는, 로봇의 동적인 반응 특성, 즉 **기계적 임피던스(Mechanical Impedance)**를 제어하는 방식입니다. 여기서 임피던스는 외부 힘에 대해 로봇이 얼마나 저항하는지를 나타내는 척도입니다.

기계적 임피던스는 우리가 잘 아는 **스프링-댐퍼-질량(Spring-Damper-Mass)** 시스템으로 모델링됩니다.

`F_ext = M(ẍ - ẍ_d) + K(x - x_d) + D(ẋ - ẋ_d)`

- `F_ext`: 외부에서 가해진 힘
- `(x - x_d)`: 기준 궤적으로부터의 위치 편차
- `M, K, D`: 목표로 하는 가상 질량(Inertia), 강성(Stiffness), 감쇠(Damping)

**임피던스 제어의 목표**는 로봇이 이 방정식처럼 동작하도록 만드는 것입니다. 즉, 로봇을 원하는 강성(`K`)과 감쇠(`D`)를 가진 '가상의 스프링-댐퍼'처럼 행동하게 만듭니다.

- **높은 임피던스 (High Impedance):** `K`와 `D`가 큼. 로봇이 매우 단단하게(rigid) 동작하며, 외부 힘에 거의 밀려나지 않고 자신의 위치를 고수하려 합니다. (일반적인 위치 제어와 유사)
- **낮은 임피던스 (Low Impedance):** `K`와 `D`가 작음. 로봇이 매우 유연하게(compliant) 동작하며, 작은 외부 힘에도 쉽게 밀려나며 순응합니다.

### 임피던스 제어의 장점

- **안전성:** 외부 힘에 부드럽게 반응하므로 인간-로봇 상호작용(HRI)이나 불확실한 환경에서의 작업에 매우 안전합니다. 협동로봇(Cobot)의 핵심 기술 중 하나입니다.
- **직관성:** 힘과 위치 사이의 동적 관계를 직접 설계하므로, 로봇의 '느낌'을 프로그래밍하기 용이합니다. 예를 들어, '스펀지처럼 부드럽게' 또는 '벽처럼 단단하게' 동작하도록 만들 수 있습니다.
- **별도의 힘 센서 불필요 (경우에 따라):** 힘 센서 없이도 모터의 전류나 엔코더 정보를 통해 외부 힘을 추정하여 임피던스 제어를 구현할 수 있습니다 (Admittance Control).

임피던스 제어는 로봇이 환경과 안전하고 자연스럽게 상호작용해야 하는 모든 응용 분야에서 핵심적인 역할을 수행합니다.
