# 파트 10: AI 기반 로봇 응용 (AI-Powered Robotic Applications)

## 10.1. 자율 이동 로봇 (Autonomous Mobile Robots, AMR) & 자율주행

### 10.1.3. 경로 및 모션 계획 (Path & Motion Planning)

**들어가며**

로봇이 자신의 위치를 알고(Localization) 주변 환경에 대한 지도(Map)를 갖게 되면, 다음 질문은 "어떻게 목표 지점까지 갈 것인가?"가 됩니다. **경로/모션 계획**은 출발점에서 목표점까지 장애물을 피하면서 안전하고 효율적인 경로를 생성하는 과정입니다. 이는 단순히 두 점을 잇는 선을 찾는 것을 넘어, 로봇의 기구학적, 동역학적 제약(예: 최소 회전 반경, 가속/감속 능력)까지 고려하는 복잡한 문제입니다.

경로 계획은 보통 두 단계로 나뉩니다.
- **전역 경로 계획 (Global Path Planning):** 전체 지도를 바탕으로 출발점에서 목적지까지의 이상적인 전체 경로를 찾습니다.
- **지역 경로 계획 (Local Path Planning):** 로봇 주변의局部적인 환경 정보와 센서 데이터를 이용해, 시시각각 변하는 상황(예: 갑자기 나타난 장애물)에 대응하며 전역 경로를 따라가는 실제 주행 경로를 생성합니다.

---

**1. 전역 경로 계획 (Global Path Planning)**

전역 경로 계획은 정적인 지도 정보가 주어졌을 때 최적의 경로를 탐색하는 데 중점을 둡니다.

- **다익스트라 알고리즘 (Dijkstra's Algorithm):**
  - **개념:** 그래프에서 한 노드(출발점)에서 다른 모든 노드까지의 **최단 경로**를 찾는 알고리즘입니다.
  - **동작:** 출발점에서부터 거리가 가까운 노드들을 순차적으로 탐색하며, 각 노드까지의 최단 거리를 갱신해 나갑니다. 항상 가장 비용(거리)이 적은 경로를 선택합니다.
  - **장점:** 최단 경로를 보장합니다.
  - **단점:** 목표점의 방향과 상관없이 모든 방향으로 탐색을 확장하므로 비효율적일 수 있습니다.

- **A* (에이스타) 알고리즘 (A* Algorithm):**
  - **개념:** 다익스트라 알고리즘을 개선하여, **목표점까지의 예상 거리(Heuristic)** 정보를 추가로 활용하는 탐색 알고리즘입니다.
  - **동작:** 경로를 평가할 때 다음 두 가지 비용의 합을 사용합니다:
    - **g(n):** 출발점부터 현재 노드까지의 실제 비용 (다익스트라와 동일)
    - **h(n):** 현재 노드부터 목표점까지의 예상 비용 (Heuristic)
    - **f(n) = g(n) + h(n)**
    이 f(n) 값이 가장 작은 노드를 우선적으로 탐색하므로, 목표점 방향으로 효율적인 탐색이 가능합니다.
  - **장점:** 다익스트라보다 훨씬 빠르면서도, 휴리스틱 함수가 특정 조건(admissible)을 만족하면 최단 경로를 보장합니다. 자율 이동 로봇의 전역 경로 계획에 가장 널리 사용되는 알고리즘 중 하나입니다.

---

**2. 지역 경로 계획 (Local Path Planning)**

지역 경로 계획은 실시간 센서 데이터를 기반으로 동적인 장애물을 회피하고 로봇의 실제 움직임을 제어하는 데 초점을 맞춥니다.

- **DWA (Dynamic Window Approach):**
  - **개념:** 로봇의 동역학(속도, 가속도)을 고려하여, 현재 상태에서 **단기간 내에 도달 가능한 속도(선속도, 각속도)의 범위(Dynamic Window)** 내에서 다수의 후보 궤적을 시뮬레이션합니다.
  - **동작:**
    1. 로봇의 현재 속도와 가속도 제한을 고려하여 탐색할 속도 공간(Dynamic Window)을 설정합니다.
    2. 이 공간 내의 여러 (선속도, 각속도) 조합에 대해 짧은 시간 후의 미래 궤적을 시뮬레이션합니다.
    3. 각 궤적을 비용 함수(목표점 근접도, 장애물과의 거리, 속도 등)로 평가하여 최적의 궤적을 선택하고, 그에 해당하는 속도 명령을 로봇에 전달합니다.
  - **장점:** 로봇의 실제 움직임 모델을 반영하므로 실현 가능한 경로를 생성합니다. 동적 장애물 회피에 효과적입니다.

- **TEB (Timed Elastic Band):**
  - **개념:** 전역 경로를 **신축성 있는 밴드(Elastic Band)**처럼 생각하고, 이 밴드를 실시간으로 최적화하여 지역 경로를 생성합니다.
  - **동작:** 전역 경로 상의 로봇 자세(위치, 방향)들을 연결한 밴드가 있다고 가정합니다. 이 밴드가 장애물, 로봇의 동역학적 제약, 시간 제약 등 여러 제약 조건들을 만족하도록 실시간으로 모양을 변형(최적화)시킵니다.
  - **장점:** 경로의 시간 정보(예: 특정 지점까지 도달하는 시간)까지 최적화할 수 있으며, 매우 부드럽고 안정적인 경로를 생성합니다.

---

**3. 샘플링 기반 계획 (Sampling-based Planning)**

고차원 공간(예: 다관절 로봇 팔)이나 복잡한 환경에서는 기존 탐색 방식의 계산량이 너무 커집니다. 샘플링 기반 방식은 전체 공간을 탐색하는 대신, 무작위로 샘플링한 점들을 연결하여 경로를 효율적으로 찾습니다.

- **RRT (Rapidly-exploring Random Tree):**
  - **개념:** 출발점에서부터 시작하여, 탐색 공간에 무작위로 점(샘플)을 찍고 그 점 방향으로 기존 트리(Tree)를 확장해 나가는 방식으로 경로를 빠르게 탐색합니다.
  - **동작:**
    1. 출발점을 루트로 하는 트리를 시작합니다.
    2. 공간 내에 무작위 샘플을 생성합니다.
    3. 트리에서 그 샘플과 가장 가까운 노드를 찾아, 샘플 방향으로 일정 거리만큼 트리를 성장시킵니다. (단, 장애물과 충돌하지 않아야 함)
    4. 이 과정을 반복하여 트리를 확장하다가, 목표점 근처에 도달하면 경로가 생성됩니다.
  - **장점:** 복잡하고 고차원적인 공간에서도 매우 빠르게 경로를 찾을 수 있습니다.
  - **단점:** 생성된 경로가 최적 경로라고 보장할 수 없습니다. (경로가 비효율적이고 구불구불할 수 있음)

- **RRT* (RRT Star):**
  - **개념:** RRT의 단점을 보완하여, **경로의 최적성(optimality)**을 점진적으로 개선하는 알고리즘입니다.
  - **동작:** RRT의 기본 골격은 유지하되, 새로운 노드를 트리에 추가할 때 주변 노드들을 탐색하여 더 짧은 경로를 만들 수 있는지 확인하고 **트리 구조를 재연결(rewire)**하는 과정이 추가됩니다. 이를 통해 시간이 지남에 따라 경로가 점차 최적 경로에 수렴하게 됩니다.
  - **장점:** RRT의 빠른 탐색 능력을 유지하면서 점근적으로 최적 경로를 찾을 수 있습니다.
  - **단점:** RRT보다 계산량이 많습니다.

**결론**

경로 계획은 로봇이 지능적으로 움직이기 위한 필수적인 과정입니다. A*와 같은 전역 경로 계획으로 전체적인 길을 찾고, DWA나 TEB와 같은 지역 경로 계획으로 실시간 변화에 대응하며, RRT와 같은 샘플링 기반 계획으로 복잡한 공간을 해결함으로써 로봇은 비로소 복잡한 현실 세계에서 자율적으로 움직일 수 있게 됩니다.
